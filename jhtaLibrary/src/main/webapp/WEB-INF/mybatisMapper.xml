<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.jhta.article">
	<select id="selectAll" resultType="adto" parameterType="se" >
		SELECT RN , article_id, user_m_id, title, content, hits, created_date, category_status, 
		FROM ( 
			   SELECT ROWNUM RN , article_id, user_m_id, title, content, hits, created_date, category_status, 
			   FROM (
			   	      SELECT article_id, user_m_id, title, content, hits, TO_CHAR(created_date,'YYYY/MM/DD') created_date, category_status, 
					  FROM article 
					  ORDER BY article_id DESC 
					) 
			   WHERE ROWNUM &lt;=#{endNo}
			 ) 
		WHERE RN &gt;=#{startNo}
	</select>
	<insert id="insertOne" parameterType="adto">
		INSERT INTO ARTICLE 
		VALUES(ARTICLE_SEQ.NEXTVAL, #{writer}, #{title}, #{contents}, SYSDATE, 0, #{ip}, 1)
	</insert>
	
	<select id="selectOne" resultType="adto" parameterType="int">
		SELECT * FROM ARTICLE 
		WHERE ARTICLE_ID = #{articleId} 
	</select>
	
	<update id="updateOne" parameterType="adto">
		UPDATE ARTICLE 
		SET WRITER = #{writer}, CONTENTS = #{contents}, TITLE = #{title}, HITS = #{hits}  
		WHERE ARTICLE_ID = #{articleId} 
	</update>
	
	<update id="raiseHits" parameterType="int">
		UPDATE ARTICLE 
		SET HITS = hits+1 
		WHERE ARTICLE_ID = #{articleId}  
	</update>
	
	<delete id="deleteOne" parameterType="int">
		DELETE ARTICLE 
		WHERE ARTICLE_ID = #{articleId} 
	</delete>
	
	<!-- total count -->
	<select id="totalCount" resultType="int">
		select count(*) from article 	
	</select>
</mapper>